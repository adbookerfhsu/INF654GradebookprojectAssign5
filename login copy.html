<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Homeschool Gradebook App Log In</title>
<link rel="stylesheet" type="text/css" id="scssstyles" href="view/css/main.css"/>
<link rel="stylesheet" id="poppinfont" href="https://fonts.googleapis.com/css2?family=Poppins"/>
<link rel="stylesheet" id="chilankafont" href="https://fonts.googleapis.com/css2?family=Chilanka"/>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<script src="https://kit.fontawesome.com/f65db0dd80.js" crossorigin="anonymous"></script>
</head>
<body>
	<header>
		<div class="headerdiv">
		<a href="index.html"><i class="fa fa-arrow-left fa-2x"></i></a>
		<p class="headerp">USER<br>LOG IN</p>
		</div>
	</header>
		<main>
			<div class="container">
				<!--<h1>Sign up</h1>-->
				<form id="form-signup">
				  <div class="loginformbox">
					  <p>New users, please use this section to begin the registration process.</p>
					<label for="exampleInputEmail1">Email</label>
					<input
					  type="email"
					  class="form-control"
					  id="signup_email"
					  aria-describedby="emailHelp"
					  placeholder="Enter email"
					/>
					<br>
				  	<label for="exampleInputPassword1">Password</label>
					<input
					  type="password"
					  class="form-control"
					  id="signup_password"
					  placeholder="Password"
					/>
				  </div>
				  <button type="submit" class="signUp">Sign Up</button>
				</form>
				
			
				
				<form id="form-signin">
				  <div class="loginformbox">
					  <p> Welcome back. Please log in to continue.</p>
					<label for="exampleInputEmail1">Email address</label>
					<input
					  type="email"
					  class="form-control"
					  id="signin_email"
					  aria-describedby="emailHelp"
					  placeholder="Enter email"
					/>
				  
					<label for="exampleInputPassword1">Password</label>
					<input
					  type="password"
					  class="form-control"
					  id="signin_password"
					  placeholder="Password"
					/>
				  </div>
				  <button type="submit" class="logIn">Log In</button>
				</form>
				
				<button id="signout" class="logOut">Sign Out</button>
			  </div>
			  <!-- Optional JavaScript -->
			  <!--jQuery loads first-->
			<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
			<!-- The core Firebase JS SDK is always required and must be listed first -->
			<script src="https://www.gstatic.com/firebasejs/8.0.1/firebase-app.js"></script>
			<script src="https://www.gstatic.com/firebasejs/8.0.1/firebase-database.js"></script>
			<script src="https://www.gstatic.com/firebasejs/8.0.1/firebase-auth.js"></script>
			<script>
			
				
	//Install Firebase			
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    var firebaseConfig = {
        apiKey: "AIzaSyBS2epzYcS3PlS-ftGpP1jiZqjWxQWfUAA",
        authDomain: "gb-signupsignin.firebaseapp.com",
        databaseURL: "https://gb-signupsignin.firebaseio.com",
        projectId: "gb-signupsignin",
        storageBucket: "gb-signupsignin.appspot.com",
        messagingSenderId: "1000282152659",
        appId: "1:1000282152659:web:69ce8b19871768a4cefe26",
        measurementId: "G-Q8EVWMJQLX",
  };
  		//Intialize Firebase
				firebase.initializeApp(firebaseConfig);
				var auth = firebase.auth();

							
				$(document).on("submit", "#form-signup", function (event) {
				  event.preventDefault();
				  var promise = firebase.auth().createUserWithEmailAndPassword(
					$("#signup_email").val(),
					$("#signup_password").val()
				).then((user) => {
					alert("Welcome! You will now be redirected to continue with your registration!"),
					window.location.href = "register.html";
				})
				  promise.catch((e) => console.log(e.message));
				});
			
				$(document).on("submit", "#form-signin", function (event) {
				  event.preventDefault();
				  var promise = firebase.auth().signInWithEmailAndPassword(
					$("#signin_email").val(),
					$("#signin_password").val(),
				).then((user) => {
					alert("Welcome back! You are now logged in."),
					window.location.href ="studentlist.html";
				})
				  promise.catch((e) => {
					console.log(e.message);
					window.alert("You are not a registered user. Please use the top portion of the form to Sign Up");
				});
				
				});
			
				$(document).on("click", "#signout", function (event) {
				  event.preventDefault();
				  var promise = auth.signOut();
				  promise.catch((e) => console.log(e.message));
				});
			
				firebase.auth().onAuthStateChanged(function(firebaseUser) {
				  if (firebaseUser) {
					console.log(firebaseUser);
					user = firebaseUser;
					
				 } else {
					user = null;
					console.log("not logged in");
				  }
				});
			  </script>
	<footer>
		<p class="footerp">&copy; Amy Booker FHSU INF 654 Mobile Web Project</p>
	</footer>	
</body>
</html>